      - name: 计算并更新年度进度
        run: |
          # 写入脚本（使用绝对路径）
          cat > calculate_progress.py << 'EOF'
          import datetime
          import re
          import os

          # 获取Action的工作目录（绝对路径）
          work_dir = os.getcwd()
          readme_path = os.path.join(work_dir, "README.md")
          print(f"README路径：{readme_path}")
          print(f"文件是否存在：{os.path.exists(readme_path)}")

          today = datetime.date.today()
          year = today.year
          total_days = 366 if (year % 4 == 0 and year % 100 != 0) or (year % 400 == 0) else 365
          days_passed = (today - datetime.date(year, 1, 1)).days + 1
          progress_percent = round((days_passed / total_days) * 100, 2)
          date_str = today.strftime("%d-%b-%Y")

          # 打印计算结果
          print(f"计算的进度：{progress_percent}%")
          print(f"计算的日期：{date_str}")

          # 读取README（绝对路径）
          with open(readme_path, "r", encoding="utf-8") as f:
              content = f.read()

          # 检查标记
          if '<!--YEAR_PROGRESS_PERCENT-->' not in content:
              print("错误：没找到 <!--YEAR_PROGRESS_PERCENT--> 标记！")
              exit(1)
          if '<!--YEAR_PROGRESS_DATE-->' not in content:
              print("错误：没找到 <!--YEAR_PROGRESS_DATE--> 标记！")
              exit(1)

          # 替换标记
          content = re.sub(r'<!--YEAR_PROGRESS_PERCENT-->', f'{progress_percent}%', content)
          content = re.sub(r'<!--YEAR_PROGRESS_DATE-->', date_str, content)

          # 写入README（绝对路径）
          with open(readme_path, "w", encoding="utf-8") as f:
              f.write(content)

          # 验证替换结果
          with open(readme_path, "r", encoding="utf-8") as f:
              new_content = f.read()
          print("替换后的进度条行：")
          for line in new_content.split("\n"):
              if "年度进度条" in line:
                  print(line)
          EOF

          # 执行脚本
          python calculate_progress.py